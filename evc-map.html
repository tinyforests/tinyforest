<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Find Your Ecological Garden</title>

  <!-- Fonts & Leaflet CSS -->
  <link
    href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=IBM+Plex+Mono:wght@300;500;700&display=swap"
    rel="stylesheet"
  />
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />

  <style>
    /* =======================
       GENERAL PAGE STYLES
       ======================= */
    body {
      font-family: "IBM Plex Mono", monospace;
      margin: 0;
      padding: 0;
      color: #3d4535;
      background-color: #fff0dc;
    }

    /* =======================
       HERO / HEADER SECTION
       ======================= */
    #container {
      text-align: center;
      padding: 30px 20px;
    }

    #page-title {
      font-family: "Abril Fatface", serif;
      font-size: 4rem;
      color: #3d4535;
      margin-bottom: 0.5em;
      letter-spacing: -2px;
      line-height: 1.2em;
    }

    .hero-highlight {
      background-color: #ffffff;
      padding: 0.2em 0.4em;
      border-radius: 0.2em;
      line-height: 1.6;
      font-size: 1.2rem;
      margin-bottom: 1em;
    }

    #container p {
      line-height: 1.5;
      font-size: 1.1rem;
    }

    /* =======================
       SEARCH CONTAINER & FORM
       ======================= */
    #search-container {
      margin-bottom: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    #address-form {
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    #address-input {
      padding: 8px;
      width: 300px;
      border: 1px solid #3d4535;
      border-radius: 4px;
      font-family: inherit;
      font-size: 1rem;
      line-height: 1.5;
      color: inherit;
    }

    #address-input::placeholder {
      color: #3d4535;
      opacity: 0.6;
    }

    #search-button,
    #location-button {
      padding: 10px 20px;
      background-color: #3d4535;
      color: #fff0dc;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      font-family: "IBM Plex Mono", monospace;
      font-size: 1rem;
    }

    #search-button:hover,
    #location-button:hover {
      background-color: #2f3928;
    }

    #location-button:disabled {
      background-color: #888888;
      cursor: not-allowed;
      opacity: 0.6;
    }

    /* =======================
       MAIN MAP (HIDDEN)
       ======================= */
    #map {
      display: none;
    }

    /* =======================
       MODAL MAP
       ======================= */
    #modal-map {
      width: 100%;
      height: 200px;
      margin-top: 10px;
      margin-bottom: 1em;
      border-radius: 4px;
      background: #e0e0e0;
    }

    /* =======================
       MODAL STYLES
       ======================= */
    #evc-modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
      z-index: 2000;
    }

    .modal-content {
      background: #3d4535;
      color: #fff0dc;
      border-radius: 6px;
      width: 90%;
      max-width: 800px;
      max-height: 90%;
      overflow-y: auto;
      padding: 1.5em;
      position: relative;
    }

    #modal-close {
      position: absolute;
      top: 0.5em;
      right: 0.5em;
      background: transparent;
      border: none;
      font-size: 1.5em;
      color: #fff0dc;
      cursor: pointer;
    }

    .title {
      font: italic 18px "IBM Plex Mono", monospace;
      color: #888888;
      margin-bottom: 0.5em;
    }

    #modal-evc-name {
      font-family: "Abril Fatface", serif;
      font-size: 2.5rem;
      margin: 0 0 0.5em;
      letter-spacing: -2px;
      line-height: 1.2em;
    }

    .status,
    .region {
      font-family: "IBM Plex Mono", monospace;
      margin: 0.2em 0;
    }

    #modal-evc-description {
      font-family: "IBM Plex Mono", monospace;
      font-weight: 500;
      font-size: 20px;
      color: #cccccc;
      margin: 0.5em 0 1em;
      font-style: normal;
    }

    #modal-plants .layer {
      margin-top: 1em;
    }

    #modal-plants h3 {
      color: #fff0dc;
      margin-bottom: 0.3em;
    }

    #modal-plants ul {
      padding-left: 1.2em;
    }

    #modal-plants li {
      margin-bottom: 0.2em;
    }

    /* =======================
       PLANT IMAGE TOOLTIPS
       ======================= */
    .plant-image-tooltip {
      position: fixed;
      z-index: 10000;
      pointer-events: none;
    }

    .plant-image-tooltip img {
      width: 200px;
      height: 200px;
      object-fit: cover;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    /* =======================
       FOOTER
       ======================= */
    footer {
      background-color: #3d4535;
      color: #fff0dc;
      padding: 60px 20px;
      text-align: center;
      margin-top: 60px;
    }

    footer .acknowledgement {
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
      background-color: rgba(255, 240, 220, 0.05);
      border-radius: 8px;
    }

    footer .acknowledgement p {
      font-family: 'IBM Plex Mono', monospace;
      font-size: 14px;
      line-height: 1.8;
      margin-bottom: 25px;
      font-weight: 300;
    }

    footer .acknowledgement p:first-child {
      font-weight: 500;
    }

    footer a {
      color: #fff0dc;
      text-decoration: underline;
      font-weight: 500;
    }

    footer a:hover {
      color: #ffffff;
    }

    footer > p {
      font-size: 12px;
      margin-top: 40px;
      font-family: 'IBM Plex Mono', monospace;
      font-weight: 300;
      opacity: 0.8;
    }

    /* =======================
       RESPONSIVE / MOBILE
       ======================= */
    @media (max-width: 768px) {
      #container {
        padding: 2rem 1.2rem;
      }

      #page-title {
        font-size: clamp(2.5rem, 12vw, 4rem);
        margin-bottom: 1.5rem;
      }

      .hero-highlight {
        font-size: 1.05rem;
        margin-bottom: 1.5rem;
        line-height: 1.6;
      }

      #container > p:not(.hero-highlight) {
        font-size: 0.95rem;
        margin-bottom: 2rem;
      }

      #search-container {
        max-width: 100%;
      }

      #address-input {
        padding: 1rem 1.2rem;
        font-size: 16px;
        width: 100%;
      }

      #search-button,
      #location-button {
        padding: 1rem 2rem;
        font-size: 0.95rem;
        width: 100%;
      }

      #address-form {
        gap: 0.8rem;
        flex-direction: column;
        width: 100%;
      }

      /* Modal optimizations */
      #evc-modal {
        padding: 10px;
      }

      .modal-content {
        max-height: 95vh;
        border-radius: 15px;
      }

      #modal-map {
        height: 200px;
        border-radius: 15px 15px 0 0;
      }

      #modal-close {
        top: 10px;
        right: 10px;
        width: 40px;
        height: 40px;
        font-size: 24px;
      }

      .title {
        font-size: 0.85rem;
      }

      #modal-evc-name {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        letter-spacing: -2px;
        line-height: 1.2em;
      }

      .status,
      .region {
        font-size: 0.9rem;
      }

      #modal-evc-description {
        font-size: 0.95rem;
        line-height: 1.7;
      }

      /* Footer mobile */
      footer {
        padding: 40px 15px;
      }

      footer .acknowledgement {
        padding: 1.5rem;
        margin: 0 auto;
      }

      footer .acknowledgement p {
        font-size: 12px;
        line-height: 1.7;
        margin-bottom: 20px;
      }

      footer > p {
        font-size: 11px;
        margin-top: 30px;
        padding: 0 10px;
      }
    }

    /* Extra small devices */
    @media (max-width: 480px) {
      #container {
        padding: 1.5rem 1rem;
      }

      #page-title {
        font-size: 2.5rem;
        margin-bottom: 1.2rem;
      }

      .hero-highlight {
        font-size: 1rem;
      }

      #address-input,
      #search-button,
      #location-button {
        padding: 0.9rem 1rem;
      }

      footer .acknowledgement {
        padding: 1.2rem;
      }

      footer .acknowledgement p {
        font-size: 11px;
        margin-bottom: 15px;
      }
    }
  </style>
</head>
<body>
  <div id="container">
    <h2 id="page-title">Find Your Ecological Garden.</h2>

    <p class="hero-highlight">
      Planting ecological species helps restore local biodiversity, support native wildlife, and build climate resilience right from your own garden.
    </p>
    <p>
      Enter your address to discover your Ecological Vegetation and find what plants belong in your garden.
    </p>

    <div id="search-container">
      <form id="address-form">
        <input
          type="text"
          id="address-input"
          placeholder="Enter your address (e.g. 123 Smith St, Melbourne)"
        />
        <button type="submit" id="search-button">Search</button>
      </form>
      <button type="button" id="location-button">üìç Use My Location</button>
    </div>
  </div>

  <!-- Hidden main map -->
  <div id="map"></div>

  <!-- EVC Modal -->
  <div id="evc-modal">
    <div class="modal-content">
      <button id="modal-close">√ó</button>
      <div id="modal-map"></div>
      <div id="modal-info">
        <p class="title">Your Ecological Vegetation is:</p>
        <p id="modal-evc-name"></p>
        <p class="status"><strong>EVC Code:</strong> <span id="modal-evc-status"></span></p>
        <p class="region"><strong>Bioregion:</strong> <span id="modal-evc-region"></span></p>
        <p id="modal-evc-description"></p>
        <div id="modal-plants"></div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="acknowledgement">
      <p>
        <a href="https://gardenerandson.com" target="_blank">Gardener & Son</a> acknowledges the Wurundjeri Woi Wurrung people as the Traditional Owners of the land on which we work and live. We pay our respects to their Elders past and present, and recognise their continuing connection to land, water, and community.
      </p>
      <p>
        The landscapes we tend were once rich ecological systems‚Äîgrassy woodlands, swamps, and creeks that supported kangaroos, possums, waterbirds, and thousands of plant species. These living systems were not lost to time, but to disconnection. Our work seeks to rekindle that relationship, restoring native ecologies, honouring local geology, and weaving biodiversity back into the urban fabric.
      </p>
      <p>
        Each garden we design is an act of remembrance and renewal ‚Äî a gesture toward healing both Country and ecology.
      </p>
    </div>
    <p>Lovingly made in Melbourne by Gardener & Son.</p>
  </footer>

  <!-- Scripts -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="evc-fetch.js"></script>
</body>
</html>
